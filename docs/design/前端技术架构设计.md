# 前端技术架构设计

## 1. 技术栈选型

| 模块 | 技术选型 | 说明 |
| :--- | :--- | :--- |
| **构建工具** | **Vite** | 极速冷启动，HMR 热更新，现代化构建。 |
| **前端框架** | **Vue 3** | Composition API (`<script setup>`)，更强的逻辑复用和类型推导。 |
| **编程语言** | **TypeScript** | 强类型约束，提升代码可维护性，减少运行时错误。 |
| **UI 组件库** | **Element Plus** | 依然是 Vue 生态最成熟的 B 端组件库，社区活跃。 |
| **CSS 框架** | **Tailwind CSS** | 原子化 CSS，提升编写效率，统一间距/颜色规范 (可选，配合 Element Plus)。 |
| **状态管理** | **Pinia** | Vue 5x 推荐状态管理，轻量、Type-safe。 |
| **路由管理** | **Vue Router 4** | 官方路由库。 |
| **HTTP 客户端** | **Axios** | 统一封装请求拦截器（Token 注入）和响应拦截器（错误处理）。 |
| **代码规范** | **ESLint + Prettier** | 统一代码风格。 |

## 2. 目录结构约定

```
src/
├── api/                  # API 接口定义 (按模块划分)
│   ├── auth.ts           # 认证相关
│   ├── alarm.ts          # 告警相关
│   └── device.ts         # 设备相关
├── assets/               # 静态资源 (Images, Icons, CSS)
├── components/           # 公共组件
│   ├── layout/           # 布局组件 (Sidebar, Header)
│   └── common/           # 通用业务组件
├── hooks/                # 组合式函数 (Composables)
├── router/               # 路由配置
│   ├── index.ts          # 路由入口
│   └── guard.ts          # 路由守卫 (权限控制)
├── stores/               # Pinia 状态 Store
│   ├── user.ts           # 用户状态 (Token, UserInfo)
│   └── app.ts            # 全局应用状态 (Sidebar collapse, Theme)
├── styles/               # 全局样式
├── types/                # TypeScript 类型定义
├── utils/                # 工具函数
│   ├── request.ts        # Axios 封装
│   └── storage.ts        # 本地存储封装
├── views/                # 页面视图 (Page)
│   ├── login/            # 登录页
│   ├── dashboard/        # 概览页
│   ├── alarm/            # 告警管理
│   │   ├── list.vue      # 列表
│   │   └── detail.vue    # 详情
│   └── system/           # 系统管理
├── App.vue               # 根组件
└── main.ts               # 入口文件
```

## 3. 核心模块设计

### 3.1 认证模块 (Auth)
- **Token 存储**: 使用 `localStorage` 存储 `accessToken` (参考 `docs/协作进度.md` 后端配合事项)。
- **路由守卫**: 
  - `router.beforeEach`: 检查是否存在 Token。
  - 无 Token 且非白名单页面 -> 跳转 `/login`。
  - 有 Token -> 放行或获取用户信息。
- **Axios 拦截器**:
  - Request: Header 自动携带 `Authorization: Bearer <token>`。
  - Response: 遇到 `401 Unauthorized` -> 清除 Token -> 跳转登录页。

### 3.2 状态管理 (Store)
- `userStore`: 
  - `token`: 字符串。
  - `userInfo`: 对象 (用户名, 角色, 权限列表)。
  - Actions: `login()`, `logout()`, `getUserInfo()`.

### 3.3 样式方案
- Element Plus 自定义主题 (覆盖 Primary Color 为科技蓝)。
- 尽量使用 Flex/Grid 布局，结合 Tailwind CSS 类名 (如 `flex items-center justify-between`)。

## 4. 开发环境
- Node.js >= 18
- 包管理器: pnpm (推荐) 或 npm
- 本地端口: `5173` (已在后端 CORS 白名单)

